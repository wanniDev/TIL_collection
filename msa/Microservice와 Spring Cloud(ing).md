# Microservice와 Spring Cloud

## Microservice

**주요 특징 :** Anti-Fragile, Cloud Native

### Antifragile

**Auto scaling**

- 자동 확장성을 갖는 다는 특징으로 보면 됩니다.
- 시스템을 구성하는 인스턴스를 오토 스케일링 그룹으로 묶고 사용량에 따라 자동으로 인스턴스를 증가할 수 있는 환경을 일컫습니다.
- 이커머스 서비스를 예로 들자면, 성수기에 트래픽이 몰리는 특수한 이벤트에 대비하기 위해 서버의 운영 개수를 늘리고 비수기에 그 개수를 줄이는 행위를 자동화하는 특징으로 이해하면 됩니다.

**Microservices**

- 복잡하게 얽혀져 있는 서비스와의 구성을 마이크로 서비스들이라고 정의할 수 있습니다.
- 넷플릭스와 아마존은 클라우드 서비스를 가장 잘 구축하고 활용하고 있는 업체로 알려져 있습니다.
  - 스프링 클라우드의 초창기 라이브러리의 상당수가 넷플릭스에서 개발되었고 스프링 재단으로 기부되었습니다.
  - 이 라이브러리들은 스프링 클라우드의 지속적인 버전업을 통해 분리된 경우도 있지만, 아직도 사용되고 있는 서비스들도 많습니다.
- 마이크로 서비스라는 것은 클라우드 네이티브 아키텍처, 클라우드 네이티브 애플리케이션의 핵심이라 볼 수 있습니다.

**Chaos engineering**

- 변동, 예견된 불확실성, 예견되지 않는 불확실성, 카오스 불확실성 등을 주요 키워드라 볼 수 있다.
- 카오스 엔지니어링이란 시스템이 급격하고 예측하지 못한 상황이라도 견딜 수 있고 신뢰성을 쌓기 위해 운영 중인 소프트웨어 시스템에 실험하는 방법 혹은 규칙이라고 생각하면 됩니다.
- 시스템의 어떤 변동이나 예견된 불확실성이나 예견되지 않은 불확실성에 대해서도 안정적인 서비스를 제공할 수 있도록 구축되어야 한다는 것을 의미합니다.

**Continuous deployments**

- 마이크로 서비스로 분리되어있는 네이티브 애플리케이션은 일일이 빌드하고 테스트하고 배포하는 행위는 복잡하고 번거롭습니다. 그래서 배포와 관련된 작업을 일련의 파이프라인으로 구성하여 작은 변화뿐만 아니라 전체적인 시스템의 업그레이드 작업에서도 빠르게 적용할 수 있게 될 겁니다.
- CI-CD라는 개념은 클라우드 네이티브나 마이크로 서비스에서만 사용되는 개념은 아니지만, 네이티브의 마이크로 서비스에서 특히 활발하게 활용되고 있어 절대 빠질 수 없는 기술이 되었습니다.

## Cloud Native Architecture

**확장 가능한 아키텍처**

- 시스템의 수평적 확장에 유연합니다.
- 확장된 서버로 시스템의 부하 분산, 가용성을 보장합니다.
- 시스템 또는, 서비스 애플리케이션 단위의 패키지로 구성되어 있습니다. (컨테이너 기반 패키지)
- 모니터링

**탄력적 아키텍처**

- 서비스 **생성 - 통합 - 배포**, 비즈니스 환경 변화에 대응 시간 단축
- 분할된 서비스 구조
- 무상태 통신 프로토콜
- 서비스의 추가와 삭제 자동으로 감지
- 변경된 서비스 요청에 따라 사용자 요청 처리(동적 처리)

**장애 격리**

- 특정 서비스에 오류가 발생해도 다른 서비스에 영향을 주지 않음

## Cloud Native Application

**CI/CD**

- 지속적인 통합, CI(Continuous Integration)
  - 통합 서버, 소스 관리(SCM), 빌드 도구, 테스트 도구
  - ex. Jenkins, Team CI, Travis CI
- 지속적 배포
  - Continuous Delivery
  - Continuous Deployment
  - pipe line

- 변경된 시스템을 무조건 새로 반영하기보다는 기존 시스템과 같이 운영해줌으로써 사용자에게 발생할 수 있는 이질감이라든가 문제점이라든가 이런 것들을 최소화하는 것이 필요합니다.
  - 카나리, Blue/Green와 같은 전략을 활용하여, 이전 버전의 서비스와 새로운 서비스의 비율을 95/5 혹은 점진적으로 100으로 적용시키는 등의 방식 중 하나를 선택할 수 있을겁니다.

**DevOps**

- Development + Operation의 약어로, 개발 조직와 운영 조직의 통합을 의미합니다.
- 고객의 요구사항을 빠르게 반영하고 만족도 높은 결과물을 제시하는 것에 그 목적을 두고 있습니다.
- 언제나 변경되는 고객의 요구사항을 자주 반영하고 자주 테스트함으로서 '고객의 요구사항을 충족시키는 에러 없는 완성물'을 만들어내는 것이 최종 목표입니다.

**Containers**

- 컨테이너 가상화 기술은 기존의 하드웨어 가상화 또는 서버 가상화에 비해 더 적은 리소스를 사용하여 가상화 서비스를 구축할 수 있습니다. 
  - 기존의 호스트 시스템 위에 독립적인 운영체제를 가지고 가상 머신을 구성하는 방식을 개선한 컨테이너 기반의 가상화 기술입니다.
- 이러한 컨테이너 가상화 위에서 작동되는 서비스들은 기존의 가상 머신으로 동작하는 서비스들에 비해 더 가볍고 빠르게 운영할 수 있다는 특징을 가지고 있습니다.

## Spring Cloud

- Cloud Native Application 기반의 MSA에 활용되는 많은 기술들을 지원해주는 pivotal 공식 라이브러리입니다.
- 버전에 따라 지원하는 부트 버전이 상이합니다.
