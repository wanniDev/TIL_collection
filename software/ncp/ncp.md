# NCP 101

payment-lab을 api 서버 형태로 배포해보고자 합니다. 운 좋게 무료 크레딧을 얻게되어, 그 크레딧으로 직접 ssl/tls 까지 적용이된 api 서버를 구축 시켜보려고 합니다. 

## NCP?

Naver Cloud Platform의 약자로 네이버 자체에서 제공하는 다양한 클라우드 서비스들의 플랫폼을 의미합니다. 서버를 배포하려면 가상화 서버 한대가 필요하므로 저는 먼저 'Server'를 이용하도록 하겠습니다.

## Server

'Server'는 클라우드 환경에서 서버를 생성하고 사용할 수 있게 해주는 NCP의 서비스입니다. 서버의 빠른 생성이 가능하고 사용한 만큼의 비용만 지불하면 되어 물리적인 서버를 직접 구성하는 것에 비해 인프라 운영 부담이 적습니다. 일시적으로 많은 서버 자원이 필요한 경우에 효율적으로 사용할 수 있습니다. 이 서비스의 특징을 요약하면 다음과 같겠습니다.

- 편리한 서버 생성
- 리소스 모니터링 기능
- 강화된 보안
- 효율적인 비용 관리(월/시간 단위 선택가능)
- 세대별 서버 생성(다양한 스펙, 환경의 서버 생성 가능)
- 다양한 타입의 스토리지 추가 기능
- 기타 SSD, GPU, 베어메탈 서버 제공 등 다양한 종류의 서버 선택 가능

## 사용 가이드

### 1. 사용 권한 설정

가장 먼저 서브계정을 만들어 계정별 권한을 명확히 해야합니다. 하지만 저의 경우, 저 한명만 사용할 예정이라 그럴 필요가 없을 것 같습니다. 그러니 바로 서버 생성 단계로 넘어가겠습니다. 

### 2. 서버 생성

VPC와 Classic 방식이 있습니다. 서비스 목적으로 이용하기에 좀 더 적합한 vpc를 활용하도록 하겠습니다. 서버를 생성하는 방법은 ncp 가이드 문서에서 아주 잘 나와있습니다.

1. 서버 생성
2. java 설치
3. Docker 설치
4. docker-compose 설치
5. code clone
6. kafka compose
7. mysql compose
8. properties
   1. Local 가져오기
   2. 포트번호 80 변경
9. build
10. test
11. execute
12. Test

### 3. ACG 설정

Inbound/outbound 규칙을 통해 네트워크에서 들어오는 트래픽을 통제하는 수단입니다.