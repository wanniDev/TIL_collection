# NCP로 나만의 서비스 구축해보기-2- Record

> 이 문서는 클라우드 기반 dns 서버 구축을 실습하는데 필요한 내용만 추렸습니다. 좀 더 디테일한 기능을 이용해보실 분은 https://guide.ncloud-docs.com/docs/globaldns-record를 참고해주세요.

이 문단에서는 Record에 도메인을 추가하고, 추가된 도메인에 레코드를 설정하거나 DNSSEC 상태를 변경하는 방법 등을 설명합니다. 먼저 메뉴 구성부터 보시겠습니다.

![image](https://github.com/f-lab-edu/payment-lab/assets/81374655/a645b27f-2ced-4f9d-88a6-be69014104b6)

실습을 진행하는데 모든 메뉴에 대한 설명은 생략해도 될 것 같습니다. 만약 세부 설명이 필요하신분은 공식 문서를 참고해주세요.

https://guide.ncloud-docs.com/docs/globaldns-record

## 도메인 및 레코드 정보

Global DNS 서비스에 Record 메뉴를 방문하면, Global DNS로 관리하려는 도메인과 호스트에 대한 정보를 확인할 수 있습니다. 위 이미지에서 6번과 7번에 해당하는 내용이죠. 각 항목에 대한 설명을 하자면 다음과 같습니다.

- 도메인 정보
  - **도메인**: 입력한 도메인명
  - **TTL**: 도메인 요청에 대한 네임 서버의 응답 값을 캐싱하여 저장하는 시간. 초 단위로 표시
  - **Master NS**: 도메인 존의 마스터 네임 서버 도메인 이름
  - **Refresh**: 도메인 존의 데이터 갱신 여부를 확인하는 주기
  - **Retry**: 장애 등의 문제로 도메인 존의 데이터 갱신 여부가 확인되지 않는 경우 다시 시도하는 주기. 초 단위로 표시
  - **Expire**: Retry를 수차례 반복하여도 데이터 갱신 여부를 확인하지 못하여 도메인 존을 폐기 처리하는 주기. 초 단위로 표시
  - **Serial**: 도메인 존의 버전 번호. 레코드값을 변경하여 배포할 때마다 1씩 증가
- 레코드 정보
  - **호스트**: 입력한 호스트명
  - **도메인**: 입력한 도메인명
  - **레코드 타입**: 선택한 레코드 타입
  - **레코드값**: 입력한 레코드값
  - **TTL**: 네임 서버가 해당 레코드를 갱신하는 주기. 초 단위로 표시.
  - **신청일시**: 레코드를 최초로 생성한 일시
  - **최종 변경 일시**: 레코드를 마지막으로 변경한 일시

## 도메인 추가

도메인을 추가하려면 도메인 등록 기관에 구매 또는 등록한 도메인명을 먼저 추가하고, 관련 레코드를 입력해야 합니다.

### 도메인명 추가

도메인 등록 기관에 등록한 도메인명을 Global DNS에 추가하는 방법은 다음과 같습니다.

1. 네이버 클라우드 플랫폼 콘솔의 **Region** 메뉴와 **Platform** 메뉴에서 이용 중인 환경을 클릭해 주십시오.

2. **Services > Networking > Global DNS** 메뉴를 차례대로 클릭해 주십시오.

3. **Record** 메뉴를 클릭해 주십시오.

4. **[도메인 추가]** 버튼을 클릭해 주십시오.

5. 도메인 추가 팝업 창에서 정보를 입력해 주십시오.

   - 이름

     : 도메인명 입력. 영어, 숫자, 하이픈(-), 와일드카드(*) 사용 가능.

     - 하이픈(-)을 마지막 문자로 사용 불가
     - 와일드카드(*) 사용 시 다른 문자 입력 불가

   - DNSSEC 적용

     : DNS 데이터의 위변조 공격을 방지하기 위한 기술인 DNSSEC(DNS Security Extensions) 적용 여부 선택

     - 활성화 시 자동으로 추가되는 DS 레코드를 도메인 등록 기관에 등록 필요

   - **설명**: 도메인에 대한 간단한 설명 추가

6. [추가]

    

   버튼을 클릭해 주십시오.

   - 도메인이 추가되기까지 수 분이 소요될 수 있습니다. 추가가 완료되면 도메인 목록에 해당 도메인이 표시되고, 원형 상태 아이콘이 노란색에서 파란색으로 변경됩니다.

### 레코드 추가

도메인에 레코드를 추가하는 방법은 다음과 같습니다.

1. 네이버 클라우드 플랫폼 콘솔의 **Region** 메뉴와 **Platform** 메뉴에서 이용 중인 환경을 클릭해 주십시오.
2. **Services > Networking > Global DNS** 메뉴를 차례대로 클릭해 주십시오.
3. **Record** 메뉴를 클릭해 주십시오.
4. 도메인 목록에서 레코드를 추가하려는 도메인을 선택해 주십시오.
5. **[레코드 추가]** 버튼을 클릭해 주십시오.
6. 레코드 추가 팝업 창에서 추가할 레코드의 정보를 입력해 주십시오.
   - 호스트명: **레코드 명**으로 표시된 입력창에 호스트명 입력
   - 레코드 타입: A로 표시된 드롭다운 메뉴에서 레코드 타입 선택
     - 각 레코드에 대한 자세한 설명은 [DNS 레코드 타입](https://guide.ncloud-docs.com/docs/globaldns-info#DNS레코드타입)을 참고
   - TTL: (5분) 300초로 표시된 드롭다운 메뉴에서 레코드값 갱신 주기 선택
     - TTL을 길게 설정하면 레코드 수정 시 반영이 지연됩니다. 되도록 기본값을 유지해 주십시오.
     - TTL을 길게 설정한 경우에는 레코드 수정 시 사전에 TTL을 줄이고 수정 완료 후 다시 길게 설정하길 권장합니다.
   - Alias: 추가할 레코드와 동일한 타입이 설정된 도메인을 선택하여 별칭 처리
     - Global DNS에 추가된 도메인만 설정할 수 있습니다.
     - A 레코드를 선택하고 Alias를 사용하면 VPC/Classic 환경의 로드밸런서(LB)로 연결 가능합니다.
   - 레코드값: 레코드 타입에 맞는 데이터를 다중으로 입력
   - ![i_globaldns_add](https://cdn.document360.io/6998976f-9d95-4df8-b847-d375892b92c2/Images/Documentation/i_globaldns_add.png?sv=2019-07-07&sig=n0ZE0vVN77Isfbv4zWPybYrTpFZjBZwcjIe53ZT%2B6i8%3D&spr=https%2Chttp&st=2023-11-09T05%3A13%3A50Z&se=2023-11-09T05%3A23%3A50Z&srt=o&ss=b&sp=r)을 클릭하여 한 번에 최대 10개의 레코드 추가 가능
7. [추가] 버튼을 클릭해 주십시오.
   - 입력한 내용이 레코드 목록에 추가됩니다.
   - 레코드가 Global DNS에 추가되었지만, 아직 DNS 서버에 배포되지 않았습니다. 운영 중인 DNS 서버에 이를 배포하려면 [설정을 적용](https://guide.ncloud-docs.com/docs/globaldns-record#설정적용)해 주십시오.

