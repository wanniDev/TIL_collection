# interview: java compile

java 프로그램이 실행되는 과정을 설명해보세요. (Memory, compiler 중심)

```
java 프로그램이 실행되는 과정은 크게 컴파일을 수행한 다음, 컴파일이 수행된 파일을 실행하는 과정으로 크게 2가지로 분류할 수 있겠습니다.
여기서 컴파일은 자바 코드를 자바 언어 스펙에 따라 분석/검증하고, JVM 스펙의 class 파일 구조에 맞는 바이트코드를 만들어내는과정을 이야기합니다.
여기서 바이트코드는 JVM에서 실행될 수 있는 코드입니다. 만약에 JVM 스펙의 class 파일 구조에 맞는 바이트코드를 만들어 낼 수 있다면, 굳이 JAVA 스펙을 따르지 않더라도 어떤 언어든 JVM에서 실행될 수 있습니다.

이렇게 만들어진 class 파일은 'java' 명령어를 통해 실행할 수 있으며, 해당 명령어의 인자로 지정된 메인함수가 선언되어있는 자바 클래스를 로딩하고, 메인 메소드를 호출하여 자바 프로그램이 실행됩니다. 'java' 명령어는 JRE(Java Runtime Enviroment)라는 자바 실행 환경에서 수행되며, 이 환경에는 클래스로더와 바이트코드의 실행에 필요한 기본 라이브러리를 제공합니다. JRE는 실질적인 자바 프로그램의 실행을 위한 JVM을 제공합니다. 이러한 JVM에 OS의 메모리를 할당받게 되는데, JVM은 역할에 영역을 나눠 영역별로 할당받은 메모리를 분배하는데, 해당 영역은 Interpreter, JIT Compiler, Linker, Instruction Set, Garbage Collector, Run-Time Data Area 등이 있습니다.



(만약 컴파일의 세부 단계에 대해 말해도 되냐고 했을 때 수락한다면...)

컴파일의 세부 단계는 '어휘 분석', '구문 분석', '의미 분석', '중간 코드 생성 및 최적화'의 과정이 있습니다.
'어휘 분석 단계'를 통해 자바 소스코드를 문자 단위로 읽으며 식별가능한 문자들을 토큰 스트림의 형태로 생성합니다.
'구문 분석 단계'를 통해 전 단계 가져온 토큰 스트림을 분석하여, 자바 스펙 언어의 문법 형식에 맞는지 확인하고, 문법이 맞지않을 경우 컴파일 에러를 냅니다. 만약 일치하다면 파스 트리를 생성합니다.
'의미 분석 단계'를 통해 타입 검사 및 자동 형변환 등을 수행합니다.
'중간 코드 생성 및 최적화 단계'에서는 전 단계에서 형성된 파스 트리를 바탕으로 기계어로 변환하기 좋은 형태의 중간 언어로 된 중간 코드를 생성합니다.
그리고 그 다음엔 중간 코드가 더 효율적인 기계어로 변환되도록 최적화하는 과정이 수행됩니다. 이 단계에서 '중복 명령어 제거' 및 루프 최적화등이 수행됩니다.

```

